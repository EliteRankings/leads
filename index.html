<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elite Rankings | MedSpa Quotes</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="form-container">
    <div class="logo-container">
        <img src="logo.png.png" alt="Elite Rankings Logo" class="brand-logo">
    </div>

    <div class="progress-container">
        <div class="progress-bar" id="progress"></div>
    </div>

    <div id="multiStepForm">
        <div class="form-step active" id="step1">
            <h2>Select a Treatment</h2>
            <p>What service are you interested in?</p>
            <div class="option-grid">
                <button type="button" class="opt-btn" onclick="nextStep('requested_service', 'Botox')">Botox & Fillers</button>
                <button type="button" class="opt-btn" onclick="nextStep('requested_service', 'Laser')">Laser Treatments</button>
                <button type="button" class="opt-btn" onclick="nextStep('requested_service', 'Body')">Body Contouring</button>
                <button type="button" class="opt-btn" onclick="nextStep('requested_service', 'Skin')">Facials & Peels</button>
            </div>
        </div>

        <div class="form-step" id="step2">
            <h2>Your Location</h2>
            <p>Where should we find providers?</p>
            <input type="text" id="zipInput" placeholder="Enter Zip Code">
            <div class="btn-group">
                <button type="button" class="back-btn" onclick="prevStep()">Back</button>
                <button type="button" class="next-btn" onclick="saveZipAndNext()">Next</button>
            </div>
        </div>

        <div class="form-step" id="step3">
            <h2>Final Details</h2>
            <p>Complete your request below to receive your quotes:</p>
            <iframe 
                id="ghl-iframe"
                src="" 
                style="width:100%; height:800px; border:none; border-radius:8px;"
                scrolling="auto">
            </iframe>
        </div>
    </div>
</div>

<script>
    let currentStep = 1;
    const totalSteps = 3;
    let selections = {
        requested_service: '',
        zip: ''
    };

    // This is your specific GHL Form Link
    const GHL_BASE_URL = "https://api.leadconnectorhq.com/widget/form/HSCelRuDZgou4EZ8Z6cB";

    function updateProgress() {
        const progress = document.getElementById('progress');
        const progressPercentage = ((currentStep - 1) / (totalSteps - 1)) * 100;
        progress.style.width = progressPercentage + "%";
    }

    function nextStep(field, value) {
        if(field) selections[field] = value;
        
        document.getElementById(`step${currentStep}`).classList.remove('active');
        currentStep++;
        
        if (currentStep === 3) {
            // Mapping your selections to URL parameters for GHL
            const finalUrl = `${GHL_BASE_URL}?requested_service=${encodeURIComponent(selections.requested_service)}&zip=${encodeURIComponent(selections.zip)}`;
            document.getElementById('ghl-iframe').src = finalUrl;
            
            // Auto-scroll to the top of the form so the user doesn't miss the first field
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        document.getElementById(`step${currentStep}`).classList.add('active');
        updateProgress();
    }

    function saveZipAndNext() {
        const zipVal = document.getElementById('zipInput').value;
        if(!zipVal) return alert("Please enter a zip code");
        nextStep('zip', zipVal);
    }

    function prevStep() {
        document.getElementById(`step${currentStep}`).classList.remove('active');
        currentStep--;
        document.getElementById(`step${currentStep}`).classList.add('active');
        updateProgress();
    }
</script>
</body>
</html>
